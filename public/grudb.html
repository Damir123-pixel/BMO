<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="icon-192.png" type="image/png">
  <title>BMO — Грудь</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f7ff;
      color: #333;
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }
    .lang-switch {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border-radius: 30px;
      padding: 8px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      display: flex;
      gap: 8px;
    }
    .lang-btn {
      padding: 10px 18px;
      border: none;
      background: transparent;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      border-radius: 25px;
      transition: all 0.3s;
    }
    .lang-btn.active {
      background: #0ea5e9;
      color: white;
    }
    .lang-btn:hover:not(.active) { background: rgba(14,165,233,0.2); }

    header {
      background: linear-gradient(135deg, #ec4899, #f43f5e);
      color: white;
      text-align: center;
      padding: 50px 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      position: relative;
    }
    h1 { font-size: 2.7rem; margin-bottom: 10px; }

    .container {
      max-width: 850px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.12);
      padding: 35px;
    }
    .section { margin-bottom: 30px; }
    label { font-size: 1.15rem; margin-bottom: 10px; display: block; font-weight: 600; }
    select, button {
      width: 100%; padding: 16px; margin: 12px 0; border-radius: 12px; border: 1px solid #ccc; font-size: 16px;
    }
    button {
      background: #ec4899; color: white; border: none; font-weight: bold; cursor: pointer; transition: 0.3s;
    }
    button:hover { background: #e11d92; }
    .recommendation {
      background: #fce7f3; padding: 20px; border-radius: 12px; margin-top: 25px;
      border-left: 5px solid #ec4899; font-size: 1.05rem;
    }
    .warning { color: #c53030; font-weight: bold; font-size: 1.2rem; }
    footer {
      text-align: center; padding: 25px; color: #555; background: #fdf2f8;
      border-radius: 16px; margin-top: 40px;
    }
  </style>
</head>
<body>

  <div class="lang-switch">
    <button class="lang-btn" data-lang="ru">RU</button>
    <button class="lang-btn" data-lang="en">EN</button>
  </div>

  <header>
    <h1 data-ru="Грудь – Где болит?" data-en="Chest Pain – Where Does It Hurt?">Грудь – Где болит?</h1>
    <p data-ru="Помощник при боли в грудной клетке<br><strong>Это НЕ заменяет врача! При сильной боли — вызывайте скорую!</strong>"
       data-en="Chest pain helper<br><strong>This is NOT a substitute for a doctor! Call emergency if pain is severe!</strong>">
      Помощник при боли в грудной клетке<br><strong>Это НЕ заменяет врача! При сильной боли — вызывайте скорую!</strong>
    </p>
  </header>

  <div class="container">

    <div class="section">
      <label data-ru="Тип боли:" data-en="Type of pain:">Тип боли:</label>
      <select id="painType">
        <option value="muscle"  data-ru="Мышечно-скелетная (мышцы, рёбра, позвоночник)" data-en="Musculoskeletal (muscles, ribs, spine)"></option>
        <option value="cardio"  data-ru="Сердечная / за грудиной" data-en="Cardiac / behind the breastbone"></option>
        <option value="lung"    data-ru="Лёгочная / дыхательная" data-en="Pulmonary / breathing-related"></option>
        <option value="stomach" data-ru="Желудочно-кишечная (изжога, рефлюкс)" data-en="Gastrointestinal (heartburn, reflux)"></option>
        <option value="other"   data-ru="Другая / неясная" data-en="Other / unclear"></option>
      </select>
    </div>

    <div class="section">
      <label data-ru="Возможная причина (выберите наиболее подходящую):" data-en="Possible cause (choose the most likely):">Возможная причина:</label>
      <select id="disease">
        <option value="intercostal"     data-type="muscle"   data-ru="Межрёберная невралгия" data-en="Intercostal neuralgia"></option>
        <option value="myositis"        data-type="muscle"   data-ru="Миозит грудных мышц" data-en="Myositis of chest muscles"></option>
        <option value="thoracic_osteo"  data-type="muscle"   data-ru="Грудной остеохондроз / протрузия" data-en="Thoracic osteochondrosis / disc protrusion"></option>
        <option value="angina"          data-type="cardio"   data-ru="Стенокардия" data-en="Angina pectoris"></option>
        <option value="heart_attack"    data-type="cardio"   data-ru="Подозрение на инфаркт!" data-en="Suspected heart attack!"></option>
        <option value="pleurisy"        data-type="lung"     data-ru="Плеврит" data-en="Pleurisy"></option>
        <option value="pneumonia"       data-type="lung"     data-ru="Пневмония" data-en="Pneumonia"></option>
        <option value="pneumothorax"    data-type="lung"     data-ru="Пневмоторакс" data-en="Pneumothorax"></option>
        <option value="gerd"            data-type="stomach"  data-ru="ГЭРБ / изжога" data-en="GERD / Acid reflux"></option>
        <option value="ulcer"           data-type="stomach"  data-ru="Язва желудка / 12-перстной кишки" data-en="Peptic ulcer (stomach/duodenum)"></option>
        <option value="panic"           data-type="other"    data-ru="Паническая атака" data-en="Panic attack"></option>
        <option value="unknown"        data-type="other"    data-ru="Неясная причина" data-en="Unclear cause"></option>
      </select>
    </div>

    <div class="section">
      <label data-ru="Уровень боли (0–10):" data-en="Pain level (0–10):">Уровень боли:</label>
      <select id="painLevel">
        <option value="0-3"  data-ru="0–3 – Слабая / терпимая" data-en="0–3 – Mild / bearable"></option>
        <option value="4-6"  data-ru="4–6 – Умеренная" data-en="4–6 – Moderate"></option>
        <option value="7-10" data-ru="7–10 – Сильная / невыносимая" data-en="7–10 – Severe / unbearable"></option>
      </select>
    </div>

    <button onclick="showRecommendation()" data-ru="Показать рекомендации" data-en="Show recommendations">Показать рекомендации</button>

    <div style="text-align:center; margin:35px 0;">
      <button onclick="history.back()" style="background:#4b5563;color:white;padding:14px 36px;border:none;border-radius:12px;font-weight:bold;">
        <span data-ru="НАЗАД" data-en="BACK">НАЗАД</span>
      </button>
    </div>

    <div id="recommendation" class="recommendation" style="display:none;"></div>
  </div>

  <footer data-ru="© 2025 Мини-медицинская машина | Это симуляция — всегда консультируйтесь с врачом!<br>При внезапной сильной боли в груди + одышке, холодном поту, тошноте — немедленно звоните 103 или 112!"
          data-en="© 2025 Mini Medical Assistant | This is only a simulation – always consult a doctor!<br>If sudden severe chest pain + shortness of breath, cold sweat, nausea – call 911 immediately!">
  </footer>

  <script>
    const langBtns = document.querySelectorAll('.lang-btn');
    const translatable = document.querySelectorAll('[data-ru][data-en]');

    let currentLang = 'ru';

    function updateAllTexts() {
      translatable.forEach(el => {
        el.innerHTML = el.dataset[currentLang];
      });

      // Переводим ВСЕ <option> в select'ах
      document.querySelectorAll('option[data-ru][data-en]').forEach(opt => {
        opt.textContent = opt.dataset[currentLang];
      });

      document.documentElement.lang = currentLang;
      document.title = document.querySelector('h1').dataset[currentLang] + ' — BMO';

      // Перезапускаем фильтр по типу боли
      toggleDiseaseSection();
    }

    function setLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('lang', lang);
      langBtns.forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
      updateAllTexts();
    }

    langBtns.forEach(btn => btn.addEventListener('click', () => setLanguage(btn.dataset.lang)));

    // При загрузке — берём язык из localStorage
    currentLang = localStorage.getItem('lang') || 'ru';
    setLanguage(currentLang);

    // Функция фильтрации заболеваний
    function toggleDiseaseSection() {
      const type = document.getElementById('painType').value;
      const options = document.querySelectorAll('#disease option');

      let firstVisible = null;
      options.forEach(opt => {
        const show = opt.dataset.type === type || opt.dataset.type === 'other';
        opt.style.display = show ? 'block' : 'none';
        if (show && !firstVisible) firstVisible = opt;
      });

      if (firstVisible) {
        document.getElementById('disease').value = firstVisible.value;
      }
    }

    document.getElementById('painType').addEventListener('change', toggleDiseaseSection);

    // Рекомендации (коротко, но полностью переведены)
    function showRecommendation() {
      const disease = document.getElementById('disease').value;
      const painLevel = document.getElementById('painLevel').value;
      const isEn = currentLang === 'en';

      let rec = `<strong>${isEn ? 'Pain level' : 'Уровень боли'}:</strong> ${document.querySelector('#painLevel').selectedOptions[0].textContent}<br><br>`;

      if (disease === 'heart_attack' || (document.getElementById('painType').value === 'cardio' && painLevel === '7-10')) {
        rec += isEn
          ? `<span class="warning">CALL 911 IMMEDIATELY!</span><br>Possible heart attack. Rest completely, nitroglycerin (if prescribed), chew aspirin 325 mg.`
          : `<span class="warning">ВЫЗЫВАЙТЕ СКОРУЮ 103/112 НЕМЕДЛЕННО!</span><br>Возможен инфаркт. Покой, нитроглицерин (если назначался), разжевать аспирин 300–500 мг.`;
      } else if (painLevel === '7-10') {
        rec += isEn
          ? `<span class="warning">Severe pain — seek medical help urgently!</span><br><br>`
          : `<span class="warning">Сильная боль — срочно к врачу!</span><br><br>`;
      }

      const recs = isEn ? {
        intercostal: {
          title: "Intercostal neuralgia",
          text: "• NSAIDs (Ibuprofen 400–600 mg)<br>• Topical ointments (Finalgon)<br>• Physiotherapy"
        },
        myositis: {
          title: "Myositis of chest muscles",
          text: "• Ibuprofen<br>• Warming ointments<br>• Rest + dry heat"
        },
        thoracic_osteo: {
          title: "Thoracic osteochondrosis",
          text: "• NSAIDs + muscle relaxants (Midocalm)<br>• Exercise therapy"
        },
        angina: {
          title: "Angina pectoris",
          text: "• Nitroglycerin under tongue<br>• Chew aspirin<br>• See cardiologist urgently!"
        },
        heart_attack: {
          title: "Suspected heart attack",
          text: "• Call 911 immediately<br>• Nitroglycerin if prescribed<br>• Chew aspirin 325 mg"
        },
        pneumothorax: {
          title: "Pneumothorax",
          text: "<span class='warning'>EMERGENCY!</span><br>Go to hospital immediately!"
        },
        pleurisy: {
          title: "Pleurisy",
          text: "• NSAIDs (Indomethacin, Ibuprofen)<br>• Antibiotics (if prescribed)<br>• Rest, see a doctor immediately!"
        },
        pneumonia: {
          title: "Pneumonia",
          text: "• Antibiotics (prescribed by doctor)<br>• Antipyretics<br>• Urgent hospital care if severe!"
        },
        gerd: {
          title: "GERD / Heartburn",
          text: "• Omeprazole 20–40 mg<br>• Antacids (Gaviscon)<br>• Diet and lifestyle changes"
        },
        panic: {
          title: "Panic attack",
          text: "• 4-7-8 breathing<br>• Valerian<br>• Psychotherapy"
        },
        unknown: {
          title: "Unclear cause",
          text: "• See a doctor soon. You may take Ibuprofen."
        }
      } : {
        intercostal: {
          title: "Межрёберная невралгия",
          text: "• НПВС (Ибупрофен 400–600 мг)<br>• Мази (Финалгон)<br>• ЛФК"
        },
        myositis: {
          title: "Миозит грудных мышц",
          text: "• Ибупрофен<br>• Согревающие мази<br>• Покой"
        },
        thoracic_osteo: {
          title: "Остеохондроз",
          text: "• НПВС + Мидокалм<br>• ЛФК"
        },
        angina: {
          title: "Стенокардия",
          text: "• Нитроглицерин под язык<br>• Аспирин 300 мг<br>• К кардиологу срочно!"
        },
        heart_attack: {
          title: "Подозрение на инфаркт",
          text: "• Вызвать скорую 103/112 немедленно<br>• Нитроглицерин под язык (если назначен)<br>• Аспирин 300 мг"
        },
        pneumothorax: {
          title: "Пневмоторакс",
          text: "<span class='warning'>СРОЧНО В БОЛЬНИЦУ!</span>"
        },
        pleurisy: {
          title: "Плеврит",
          text: "• НПВС (Индометацин, Ибупрофен)<br>• Антибиотики (по назначению врача)<br>• Обязательно к врачу!"
        },
        pneumonia: {
          title: "Пневмония",
          text: "• Антибиотики по назначению врача<br>• Жаропонижающие препараты<br>• СРОЧНО к врачу или в стационар!"
        },
        gerd: {
          title: "ГЭРБ (изжога)",
          text: "• Омепразол 20–40 мг (или аналогичные препараты)<br>• Антациды (Гевискон, Ренни)<br>• Диета и изменение образа жизни"
        },
        panic: {
          title: "Паническая атака",
          text: "• Дыхание 4-7-8<br>• Валериана<br>• Психолог"
        },
        unknown: {
          title: "Неясная причина",
          text: "• К врачу. Можно Ибупрофен."
        }
      };

      const selected = document.querySelector('#disease').selectedOptions[0];
      if (selected && recs[disease]) {
        rec += `<strong>${selected.textContent}:</strong><br>${recs[disease].text}`;
      }

      document.getElementById('recommendation').innerHTML = rec;
      document.getElementById('recommendation').style.display = 'block';
    }
  </script>
</body>
</html>
