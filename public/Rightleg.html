<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="icon-192.png" type="image/png">
  <title>BMO — Правая нога</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #eff6ff;
      color: #333;
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }

    /* ЕДИНЫЙ ПЕРЕКЛЮЧАТЕЛЬ ЯЗЫКА */
    .lang-switch {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border-radius: 30px;
      padding: 8px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      display: flex;
      gap: 8px;
    }
    .lang-btn {
      padding: 10px 18px;
      border: none;
      background: transparent;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      border-radius: 25px;
      transition: all 0.3s;
    }
    .lang-btn.active {
      background: #0ea5e9;
      color: white;
    }
    .lang-btn:hover:not(.active) { background: rgba(14,165,233,0.2); }

    header {
      background: linear-gradient(135deg, #1d4ed8, #60a5fa);
      color: white;
      text-align: center;
      padding: 50px 20px;
      border-radius: 16px;
      margin-bottom: 20px;
    }
    h1 { font-size: 2.8rem; margin-bottom: 10px; }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 15px 45px rgba(0,0,0,0.12);
      padding: 40px;
    }
    .section { margin-bottom: 32px; }
    label { font-size: 1.15rem; font-weight: 600; display: block; margin-bottom: 10px; }
    select, button {
      width: 100%; padding: 16px; margin: 12px 0; border-radius: 12px; border: 1px solid #ccc; font-size: 16px;
    }
    button {
      background: #1d4ed8; color: white; border: none; font-weight: bold; cursor: pointer; transition: 0.3s;
    }
    button:hover { background: #1e40af; }

    .recommendation {
      background: #dbeafe; padding: 24px; border-radius: 12px; margin-top: 25px;
      border-left: 6px solid #1d4ed8; font-size: 1.05rem; line-height: 1.8;
    }
    .warning {
      color: #7f1d1d; font-weight: bold; font-size: 1.45rem;
      background: #fee2e2; padding: 20px; border-radius: 12px; margin: 15px 0;
      text-align: center; border: 3px solid #ef4444;
    }
    footer {
      text-align: center; padding: 30px; background: #dbeafe;
      border-radius: 16px; margin-top: 40px; color: #555;
    }
  </style>
</head>
<body>

  <div class="lang-switch">
    <button class="lang-btn" data-lang="ru">RU</button>
    <button class="lang-btn" data-lang="en">EN</button>
  </div>

  <header>
    <h1 data-ru="Правая нога – Где болит?" data-en="Right Leg – Where Does It Hurt?">Правая нога – Где болит?</h1>
    <p data-ru="Помощник при боли, отёке, онемении и хромоте в правой ноге"
       data-en="Helper for pain, swelling, numbness, and limping in the right leg">
    </p>
    <p style="font-size:1.15rem;margin-top:15px;background:#7f1d1d;padding:12px;border-radius:12px;" 
       data-ru="Внезапный отёк + сильная боль + покраснение/жар в ноге → СКОРАЯ 103/112 СЕЙЧАС!<br>Это может быть тромбоз!" 
       data-en="Sudden swelling + severe pain + redness/heat in leg → CALL 911 NOW!<br>This could be a blood clot!">
    </p>
  </header>

  <div class="container">

    <div class="section">
      <label data-ru="Где и как болит:" data-en="Where and how it hurts:">Где и как болит:</label>
      <select id="painType">
        <option value="hip"            data-ru="Тазобедренный сустав / пах" data-en="Hip joint / groin"></option>
        <option value="thigh"          data-ru="Бедро" data-en="Thigh"></option>
        <option value="knee"           data-ru="Колено" data-en="Knee"></option>
        <option value="calf"           data-ru="Голень / икра" data-en="Calf / shin"></option>
        <option value="ankle_foot"     data-ru="Лодыжка / стопа / пальцы" data-en="Ankle / foot / toes"></option>
        <option value="back_radiating" data-ru="Боль из поясницы отдаёт в правую ногу" data-en="Pain from lower back radiates to right leg"></option>
        <option value="swelling"       data-ru="Отёк + боль" data-en="Swelling + pain"></option>
        <option value="other"          data-ru="Другое / хроническая" data-en="Other / chronic"></option>
      </select>
    </div>

    <div class="section">
      <label data-ru="Вероятная причина:" data-en="Likely cause:">Вероятная причина:</label>
      <select id="disease">
        <option value="coxarthrosis"     data-type="hip"     data-ru="Коксартроз правого тазобедренного сустава" data-en="Right hip osteoarthritis"></option>
        <option value="trochanteritis"   data-type="hip"     data-ru="Трохантерит" data-en="Trochanteric bursitis"></option>

        <option value="muscle_strain"    data-type="thigh"   data-ru="Мышечное перенапряжение / растяжение" data-en="Muscle strain / stretch"></option>
        <option value="piriformis"       data-type="thigh"   data-ru="Синдром грушевидной мышцы" data-en="Piriformis syndrome"></option>

        <option value="gonarthrosis"     data-type="knee"    data-ru="Гонартроз правого колена" data-en="Right knee osteoarthritis"></option>
        <option value="meniscus"         data-type="knee"    data-ru="Повреждение мениска" data-en="Meniscus tear"></option>
        <option value="runner_knee"      data-type="knee"    data-ru="«Колено бегуна» / илиотибиальный синдром" data-en="Runner's knee / IT band syndrome"></option>

        <option value="cramp"            data-type="calf"    data-ru="Судороги икроножной мышцы" data-en="Calf cramps"></option>
        <option value="compartment"      data-type="calf"    data-ru="Компартмент-синдром" data-en="Compartment syndrome"></option>
        <option value="dvt"              data-type="calf"    data-ru="Тромбоз глубоких вен" data-en="Deep vein thrombosis (DVT)"></option>

        <option value="ankle_sprain"     data-type="ankle_foot" data-ru="Растяжение голеностопа" data-en="Ankle sprain"></option>
        <option value="plantar"          data-type="ankle_foot" data-ru="Пяточная шпора / плантарный фасциит" data-en="Plantar fasciitis / heel spur"></option>

        <option value="lumbosciatica"    data-type="back_radiating" data-ru="Люмбоишиалгия / грыжа L4-S1 справа" data-en="Right-sided lumbosciatica / L4-S1 herniation"></option>

        <option value="thrombosis"       data-type="swelling" data-ru="Тромбоз / тромбофлебит" data-en="Venous thrombosis / thrombophlebitis"></option>
        <option value="lymph"            data-type="swelling" data-ru="Лимфатический отёк" data-en="Lymphedema"></option>

        <option value="vascular"         data-type="other"   data-ru="Облитерирующий атеросклероз" data-en="Peripheral artery disease"></option>
        <option value="unknown"          data-type="other"   data-ru="Неясная причина" data-en="Unclear cause"></option>
      </select>
    </div>

    <div class="section">
      <label data-ru="Сила боли (0–10):" data-en="Pain intensity (0–10):">Сила боли:</label>
      <select id="painLevel">
        <option value="0-4" data-ru="0–4 – терпимо" data-en="0–4 – tolerable"></option>
        <option value="5-7" data-ru="5–7 – сильная" data-en="5–7 – strong"></option>
        <option value="8-10" data-ru="8–10 – нестерпимая / внезапная" data-en="8–10 – unbearable / sudden"></option>
      </select>
    </div>

    <button onclick="showRecommendation()" data-ru="Показать рекомендации" data-en="Show recommendations">Показать рекомендации</button>

    <div style="text-align:center; margin:40px 0;">
      <button onclick="history.back()" style="background:#4b5563;color:white;padding:14px 36px;border:none;border-radius:12px;font-weight:bold;">
        <span data-ru="НАЗАД" data-en="BACK">НАЗАД</span>
      </button>
    </div>

    <div id="recommendation" class="recommendation" style="display:none;"></div>
  </div>

  <footer data-ru="© 2025 Мини-медицинская машина | Это только ориентир!<br>При внезапном сильном отёке ноги + одышке, болью в груди — немедленно 103 (возможна ТЭЛА!)"
          data-en="© 2025 Mini Medical Assistant | Guide only!<br>Sudden severe leg swelling + shortness of breath + chest pain — call 911 immediately (possible pulmonary embolism!)">
  </footer>

  <!-- УНИВЕРСАЛЬНЫЙ СКРИПТ ПЕРЕВОДА -->
  <script>
    const langBtns = document.querySelectorAll('.lang-btn');
    const translatable = document.querySelectorAll('[data-ru][data-en]');

    let currentLang = 'ru';

    function updateAllTexts() {
      translatable.forEach(el => el.innerHTML = el.dataset[currentLang]);
      document.querySelectorAll('option[data-ru][data-en]').forEach(opt => opt.textContent = opt.dataset[currentLang]);
      document.title = document.querySelector('h1').dataset[currentLang] + ' — BMO';
      document.documentElement.lang = currentLang;
      filterDiseases();
    }

    function setLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('lang', lang);
      langBtns.forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
      updateAllTexts();
    }

    langBtns.forEach(btn => btn.addEventListener('click', () => setLanguage(btn.dataset.lang)));

    currentLang = localStorage.getItem('lang') || 'ru';
    setLanguage(currentLang);

    function filterDiseases() {
      const type = document.getElementById('painType').value;
      const options = document.querySelectorAll('#disease option');

      let first = null;
      options.forEach(opt => {
        const show = opt.dataset.type === type || opt.dataset.type === 'other';
        opt.style.display = show ? 'block' : 'none';
        if (show && !first) first = opt;
      });
      if (first) document.getElementById('disease').value = first.value;
    }

    document.getElementById('painType').addEventListener('change', filterDiseases);

    function showRecommendation() {
      const disease = document.getElementById('disease').value;
      const level = document.getElementById('painLevel').value;
      const isEn = currentLang === 'en';

      let rec = `<strong>${isEn ? 'Pain level' : 'Сила боли'}:</strong> ${document.querySelector('#painLevel').selectedOptions[0].textContent}<br><br>`;

      if (disease === 'dvt' || disease === 'thrombosis' || 
          (level === '8-10' && document.getElementById('painType').value === 'swelling')) {
        rec += isEn
          ? `<div class="warning">CALL 911 IMMEDIATELY!<br>Possible deep vein thrombosis or pulmonary embolism!</div>`
          : `<div class="warning">НЕМЕДЛЕННО ВЫЗЫВАЙТЕ СКОРУЮ 103/112!<br>Возможен тромбоз глубоких вен или ТЭЛА!</div>`;
      }

      const advice = isEn ? {
        coxarthrosis: "Right hip osteoarthritis:<br>• NSAIDs, chondroprotectors, exercise<br>• Cane if limping<br>• Joint replacement if severe",
        trochanteritis: "Trochanteritis:<br>• Steroid injection into bursa<br>• NSAIDs, physiotherapy — fast relief",
        muscle_strain: "Muscle strain:<br>• Rest 2–3 days, ice → heat<br>• Diclofenac / Capsicam gel",
        piriformis: "Piriformis syndrome:<br>• Stretching, muscle relaxants<br>• Trigger point injection if needed",
        gonarthrosis: "Right knee osteoarthritis:<br>• Hyaluronic acid injections<br>• Knee brace, weight loss",
        meniscus: "Meniscus tear:<br>• Knee MRI + orthopedist<br>• Arthroscopy if locked",
        runner_knee: "Runner's knee:<br>• IT band stretching, foam roller<br>• Orthotics",
        cramp: "Calf cramps:<br>• Magnesium, hydration<br>• Stretching before bed",
        dvt: "DVT — CALL 911!",
        thrombosis: "Venous thrombosis — CALL 911!",
        ankle_sprain: "Ankle sprain:<br>• RICE protocol<br>• Figure-8 bandage",
        plantar: "Plantar fasciitis:<br>• Custom insoles, night splint<br>• Shockwave therapy",
        lumbosciatica: "Right-sided sciatica:<br>• NSAIDs + muscle relaxants + B-vitamins<br>• Urgent MRI if numbness",
        vascular: "Vascular issues:<br>• Pentoxifylline, Detralex<br>• Vascular surgeon",
        unknown: "Unclear cause:<br>See orthopedist/neurologist + venous ultrasound & lumbar MRI."
      } : {
        coxarthrosis: "Коксартроз правого ТБС:<br>• НПВС, хондропротекторы, ЛФК<br>• Плавание, трость при хромоте<br>• При сильной боли — замена сустава",
        trochanteritis: "Трохантерит:<br>• Уколы глюкокортикоидов в вертел<br>• НПВС, физиотерапия — быстро помогает",
        muscle_strain: "Мышечное перенапряжение:<br>• Покой 2–3 дня, холод → тепло<br>• Мазь Диклофенак / Капсикам",
        piriformis: "Синдром грушевидной мышцы:<br>• Растяжка, миорелаксанты<br>• Укол в мышцу при сильной боли",
        gonarthrosis: "Гонартроз правого колена:<br>• Уколы гиалуронки<br>• Ортез, ЛФК, снижение веса",
        meniscus: "Повреждение мениска:<br>• МРТ + ортопед<br>• При блокаде — артроскопия",
        runner_knee: "Колено бегуна:<br>• Растяжка илиотибиального тракта<br>• Роллер, ортез",
        cramp: "Судороги икр:<br>• Магний, калий, обильное питьё<br>• Растяжка перед сном",
        dvt: "ТРОМБОЗ — СКОРАЯ!",
        thrombosis: "ТРОМБОЗ — СКОРАЯ!",
        ankle_sprain: "Растяжение голеностопа:<br>• RICE: покой, лёд, компрессия, возвышение<br>• Тугая 8-образная повязка",
        plantar: "Пяточная шпора:<br>• Ортопедические стельки, ночной ортез<br>• Ударно-волновая терапия",
        lumbosciatica: "Люмбоишиалгия справа:<br>• НПВС + Мидокалм + витамины B<br>• МРТ поясницы при онемении",
        vascular: "Сосудистые проблемы:<br>• Трентал, Детралекс, УЗИ сосудов<br>• К сосудистому хирургу",
        unknown: "Неясная причина:<br>Начните с ортопеда/невролога + УЗИ вен ног и МРТ поясницы."
      };

      const selectedText = document.querySelector('#disease').selectedOptions[0].textContent;
      rec += `<strong>${selectedText}:</strong><br>`;
      rec += advice[disease] || (isEn ? "See a doctor soon." : "Обратитесь к врачу.");

      document.getElementById('recommendation').innerHTML = rec;
      document.getElementById('recommendation').style.display = 'block';
    }
  </script>
</body>
</html>